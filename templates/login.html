{% extends "base.html" %}

{% block content %}
{% with messages = get_flashed_messages() %}
  {% if messages %}
    <div class="flash-messages">
      {% for message in messages %}
        <div class="flash-message">{{ message }}</div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}
<section class="form-section">
  <div class="form-container">
    <h2>Login</h2>
    <form method="POST" action="/login">
      <div class="form-group">
        <label for="email">Email Address</label>
        <input type="email" id="email" name="email" required>
      </div>
      <div class="form-group">
        <label for="password">Password</label>
        <div class="password-input-container">
          <input type="password" id="password" name="password" required maxlength="12" pattern=".{8,12}" placeholder="8-12 characters">
          <button type="button" class="toggle-password" onclick="togglePasswordVisibility('password')">
            <i class="fas fa-eye"></i>
          </button>
        </div>
      </div>

      <button type="submit" class="btn">Login</button><br>
      <div class="forgot-link">
        <small><a href="/forgot-password">Forgot Password?</a></small>
      </div>
    </form>
    <p class="form-footer">Don't have an account? <a href="/register">Sign Up here</a>.</p>
  </div>
</section>
<style>
  .password-input-container { position: relative; display: flex; align-items: center; }
  .toggle-password { position: absolute; right: 10px; background: none; border: none; cursor: pointer; padding: 0; color: #666; }
  .toggle-password:focus { outline: none; }
  
  .flash-messages { width: 100%; max-width: 400px; margin: 0 auto 20px; }
  .flash-message { background-color: #f8d7da; color: #721c24; padding: 10px; border-radius: 5px; text-align: center; margin-bottom: 10px; }
</style>
  <script>
    function togglePasswordVisibility(inputId) {
      const input = document.getElementById(inputId);
      const icon = event.currentTarget.querySelector('i');
      if (input.type === 'password') {
        input.type = 'text';
        icon.classList.remove('fa-eye');
        icon.classList.add('fa-eye-slash');
      } else {
        input.type = 'password';
        icon.classList.remove('fa-eye-slash');
        icon.classList.add('fa-eye');
      }
    }
  </script>
</section>
{% endblock %}
